<!doctype html>
<html>
<head>
    <meta charset="gbk" />
    <title>fdevlib-example:Valid</title>
    <link href="/fdevlib/static/css/merge.css" rel="stylesheet"/>
    <style type="text/css">
a { color: #06C; text-decoration: none; }
a:hover { color: #FF7300; text-decoration: underline; }
.txt { padding: 3px 2px; border: solid 1px #A8ACAD; background: #FFF url(http://img.china.alibaba.com/images/trade/quotation/100426/bg1.gif) repeat-x; line-height: 1.2; }
a.iconAlitalk { padding: 2px 0 2px 20px; background: url(http://img.china.alibaba.com/images/fdevlib/contact-icon.gif) no-repeat; line-height: 14px; color: #001D4C; text-decoration: underline !important; font-family: arial,helvetica,sans-serif; font-size: 12px; font-weight: normal; zoom: 1; _padding-top: 3px; }
a.iconAlitalk:hover { color: #FF7300; }
a.icon-on { background-position: -190px -59px; }
a.icon-off { background-position: -190px -29px; }
a.icon-mb { background-position: -190px 1px; }
.btn-a { overflow: hidden; height: 32px; text-decoration: none !important; }
.btn-a span { display: block; float: left; height: 32px; background: url(http://img.china.alibaba.com/images/common/icon_v02/btn2.png) no-repeat; cursor: pointer; }
.btn-a .btn-l { padding-left: 2px; background-position: left top; }
.btn-a .btn-r { width: 2px; background-position: right top; }
.btn-a button { margin: 0; padding: 0; height: 32px; outline: none; border: 0 none; background: none; cursor: pointer; }
.btn-a em { padding: 0 12px; font: bold 14px/32px \5B8B\4F53; color: #934002; }
.btn-a:hover .btn-l { background-position: left -32px; }
.btn-a:hover .btn-r { background-position: right -32px; }
.btn-a:hover em { color: #333; }
.btn-a:active .btn-l { background-position: left top; }
.btn-a:active .btn-r { background-position: right top; }
.btn-a2 { overflow: hidden; height: 22px; text-decoration: none !important; }
.btn-a2 span { display: block; float: left; height: 22px; background: url(http://img.china.alibaba.com/images/common/icon_v02/btn3.png) no-repeat; cursor: pointer; }
.btn-a2 .btn-l { padding-left: 2px; background-position: left top; }
.btn-a2 .btn-r { width: 2px; background-position: right top; }
.btn-a2 em { padding: 0 8px; font: normal 12px/24px \5B8B\4F53; color: #333 !important; }
.btn-a2:hover .btn-l { background-position: left -22px; }
.btn-a2:hover .btn-r { background-position: right -22px; }
.btn-a4 { display: block; float: left; overflow: hidden; height: 32px; text-decoration: none !important; }
.btn-a4 span { display: block; float: left; height: 32px; background: url(http://img.china.alibaba.com/images/common/icon_v02/btn1.png) no-repeat; cursor: pointer; }
.btn-a4 .btn-l { padding-left: 2px; background-position: left top; }
.btn-a4 .btn-r { width: 2px; background-position: right top; }
.btn-a4 button { margin: 0; padding: 0; height: 32px; outline: none; border: 0 none; background: none; cursor: pointer; }
.btn-a4 em { padding: 0 12px; font: bold 14px/32px \5B8B\4F53; color: #333; }
.btn-a4:hover .btn-l { background-position: left -32px; }
.btn-a4:hover .btn-r { background-position: right -32px; }
.btn-a4:hover em { color: #06C; }
fieldset { margin-bottom: 8px; }
legend { padding-left: 12px; border-left: solid 5px #06C; font-size: 14px; font-weight: bold; line-height: 1.2; color: #333; }
.option ul { padding-top:8px; }
.option li { padding: 4px 12px; border: solid 1px #FFF; zoom: 1; }
.option .checked { border: solid 1px #E5EEFF; background-color: #FAFDFF; }
.option label { margin-left: 4px; }
.option .ext { display: none; padding: 4px 4px 4px 16px; }
.option .notice { float: right; margin-top: -22px; }
.option .checked .ext { display: block; }
.option table { width: 100%; }
.option em { padding: 0 4px; color: #F00; }
.option table select { margin-right: 4px; width: 121px; }
.option table input { margin-right: 4px; width: 115px; }
.option th, .option td { padding: 2px; vertical-align: top; }
.option caption { padding: 4px; font-weight: bold; text-align: left; }
.option tbody th { width: 90px; font-weight: normal; text-align: right; }
.option .c2 { width: 420px; }
.option .c3 { width: auto; }
fieldset .n, fieldset .y, fieldset .d { padding-left: 16px; background: url(http://img.china.alibaba.com/images/common/icon_v02/form-icons.gif) no-repeat; }
fieldset .n, fieldset .y { display: none; }
fieldset .d { background-position: 0 -124px; color: #06C; }
fieldset .error .d, fieldset .ok .d { display: none; }
fieldset .error .n { display:inline !important; background-position: 0 -40px; color: #ff0000; }
fieldset .ok .y { display: inline !important; background-position: 0 -82px; color: #9fcd57; }
#mode img { vertical-align: middle; }
#mode label span { color: #666; }
#mode .n { margin-left: 16px; }
#mode .split { margin: 8px 0; border-top: dashed 1px #DBDDDE; height: 1px; overflow: hidden; }
#mode .flow { padding: 8px 0; }
#contact { padding-left: 20px; line-height: 2; }
#product { margin-bottom: 8px; border: solid 1px #E3E3EA; }
#product table { table-layout: fixed; width: 100%; border-collapse: separate; border: solid 1px #FFF; }
#product th { height: 31px; background: url(http://img.china.alibaba.com/images/common/icon_v02/bg3.png) no-repeat; font-weight: normal; text-align: center; }
#product th.c1 { width: 80px; background-position: -2px 0; }
#product th.c2 { width: auto; background-position: -2px 0; }
#product th.c3 { width: 120px; }
#product th.c4 { width: 120px; }
#product th.c5 { width: 150px; }
#product th.c6 { width: 120px; }
#product th.c7 { width: 120px; }
#product td { padding: 8px; vertical-align: top; word-break: keep-all; }
#product td.c1, #product td.c3, #product td.c5, #product td.c6, #product td.c7 { text-align: center; }
#product td.c1 { vertical-align:middle; }
#product td.c2 { word-wrap: break-word; }
#product td.c4 em { color:#06C; cursor:pointer; }
#product td.c5 { font-weight: bold; }
#product td.c4 span,#product td.c6 span { display:none; position:absolute; padding:0 4px; left:0; top:22px; border:solid 1px #F00; white-space: nowrap; word-break: keep-all;*top:24px;  }
#product td.error .n,#product td.error .n { display:inline; background:#FFF url(http://img.china.alibaba.com/images/common/icon_v02/form-icons.gif) no-repeat; color:#F00; text-indent:16px; background-position:4px -39px; }
#product td.c6 a { display: inline-block; width: 11px; height: 11px; overflow:hidden; background: url(http://img.china.alibaba.com/images/common/icon_v02/mp1.png) no-repeat; }
#product td.c6 .minus { background-position: 0 0; }
#product td.c6 .minus:hover { background-position: 0 -40px; }
#product td.c6 .minus-disabled { background-position: 0 -80px; cursor:default; }
#product td.c6 .plus { background-position: 0 -20px; }
#product td.c6 .plus:hover { background-position: 0 -60px; }
#product td.c6 .plus-disabled { background-position: 0 -100px; cursor:default; }
#product td.c7 { font-size: 14px; font-weight: bold; color: #FF7300; }
#product td .txt { width: 55px; text-align: right; vertical-align:middle; margin-right:4px; *margin-left:4px; }
#memo textarea { width:360px; height:60px; vertical-align:top; }
#memo em { margin:0 4px; font-size:16px; font-weight:700; color:#FF7300;}
#btnSubmit,#btnRegist { float:right; }
#btnSubmit button { *margin-left:-28px;*margin-right:-38px; }
#btnRegist button { *margin-left:-42px;*margin-right:-52px; }

.authcode th, .authcode td { padding: 0 2px; vertical-align: bottom; }
.authcode th { text-align: right; font-weight:normal; }
.authcode img { float:left; }
.authcode em { padding: 0 4px; color: #F00; }
.authcode input { width: 40px !important; }

#auth table { float:right; }

.modal { border: solid 8px #585858; background-color: #FFF; line-height: 1.5; }
.modal .title { padding: 0 8px; border-bottom: solid 1px #C1D2E6;  background: url(http://img.china.alibaba.com/images/trade/quotation/100426/bg6.gif) repeat-x;}
.modal .title .close { display: block; float: right; margin-top: 7px; width: 21px; height: 22px; overflow: hidden; background: url(http://img.china.alibaba.com/images/trade/quotation/100426/close1.png) no-repeat; cursor: pointer; }
.modal h3 { float:left; height: 35px;line-height: 2.5; font-size: 14px; font-weight: bold; color: #06C; }
#regist { width: 616px; }
#regist .box { padding:8px; }
#regist .form { width: 100%; }
#regist .tip { text-align:right; }
#regist .tip em,#regist th em { padding: 0 4px; color: #F00; }
#regist input { margin-right:4px; }
#regist .txt { width: 190px; }
#regist th, #regist td { padding: 4px; vertical-align: top; }
#regist th { width:80px; text-align:right; font-weight:normal; }
#regist .c2 { width:220px; }
#regist .c3 { width:auto; }
#regist .proxy { margin-left:4px; }
#regist .authcode table { float:left; }
#regist .authcode th { vertical-align:middle; }
#regist .authcode td { padding:0 2px; vertical-align:bottom; }
#regist .authcode input { margin:0; }

#btnRegistSubmit button { *margin-left:-26px; *margin-right:-26px; }

#service { width:616px; }
#service h4 { font-weight:700; }
#service h4, #service p { margin:8px; text-align:center; }
#service .btn-a2 { display:inline-block; }

.tips-c { position: absolute; background-color: #FFF; }
.tips-c span { display: block; position: absolute; top: -5px; left: 30px; width: 10px; height: 7px; overflow: hidden; background: url(http://img.china.alibaba.com/images/common/icon_v02/arrow3.gif) no-repeat; }
.tips-c div { padding: 4px 6px; border: solid 2px #0F86DF; line-height: 18px; }
.tips-c p { word-wrap: break-word; }
#tipDetail { width: 420px; }
    </style>
    <script src="/fdevlib/static/js/merge-fdev3.js"></script>
    <script src="http://style.china.alibaba.com/js/lib/fdev-v3/core/yui/json-min.js" type="text/javascript"></script>
    <script src="http://style.china.alibaba.com/js/lib/fdev-v3/core/yui/get-min.js" type="text/javascript"></script>
    <script src="http://style.china.alibaba.com/js/lib/fdev-v3/widget/valid/valid-min.js" type="text/javascript"></script>
    <script src="http://style.china.alibaba.com/js/lib/fdev-v3/widget/block/block-min.js" type="text/javascript"></script>
    <script src="http://style.china.alibaba.com/js/lib/fdev-v3/widget/alitalk/alitalk-min.js" type="text/javascript"></script>
    <script type="text/javascript">
        /*
        * Denis 2010.09.13
        */
        //Province City & Area Valid
        function vPCA() {
            var td=FYD.getAncestorByTagName(this,'td'),
        sls=FYS('select',td);
            sls.pop();
            if(sls.some(function (el) { return !el.selectedIndex; }))
                return '省和市必须选择。';
            return true;
        }
        //Telephone & Mobile Valid
        function vPhone(o) {
            var td=FYD.getAncestorByTagName(this,'td'),
        ipts=FYS('input',td),
        placeholder=FYD.getAttribute(ipts[0],'placeholder');
            this.value=this.value.trim();
            if((!ipts[0].value||ipts[0].value==placeholder)&&!ipts[1].value)
                return '电话和手机至少填写一项。';
            function vTel() {
                if(ipts[0].value&&ipts[0].value!=placeholder&&!/^(\d+(-\d+)?(-\d+)?)([\/,;]\d+(-\d+)?(-\d+)?)*([\/,;]\d+(-\d+)+(-\d+)?)?[\/,;]?$/.test(ipts[0].value))
                    return '请填写正确的电话号码，多个号码请使用“/”、“,”、“;”分隔，分机号码用“-”分隔。例：0571-88882222-1000';
                return true;
            }
            function vMobile() {
                if(ipts[1].value!=''&&!FD.widget.Valid.regExps.isMobile.test(ipts[1].value))
                    return '请填写有效的手机号码';
                return true;
            }
            if(o.key=='电话') {
                return vTel();
            } else {
                var res=vTel();
                if(res===true) return vMobile();
                return res;
            }
        }
        //trade mode Valid
        function vMode() {
            var ul=FYD.getAncestorByTagName(this,'ul'),
        radios=FYS('input[type=radio]',ul);
            if(radios.some(function (el) { return el.checked; }))
                return true;
            return '请选择交易方式';
        }
        /*
        * @method 用户名异步验证
        * @param {Object} o 验证相关属性
        * @param {Function} onValid 验证结束后触发的方法
        */
        function vUser(obj,onValid) {
            var opt=obj['opt'],cfg=obj['cfg'];
            if(!/^[A-Za-z]{1}[A-Za-z\d]{3,19}$/.test(this.value)) {
                onValid.call(this,'reg',opt);
                return;
            }
            FD.common.request('JSONP',opt.remote,{
                scope: this,
                fn: 'user',
                onCallback: function (o) {
                    if(o.success) {
                        cfg.isValid=true;
                        onValid.call(this,'pass',opt);
                    } else
                        onValid.call(this,'rUser',opt);
                },
                onTimeout: function () {
                    cfg.isValid=true;
                    onValid.call(this,'pass',opt);
                },
                onFailure: function () {
                    cfg.isValid=true;
                    onValid.call(this,'pass',opt);
                }
            },{
                checkValue: encodeURI(this.value)
            });
        }
        /*
        * @method 邮箱地址异步验证
        * @param {Object} o 验证相关属性
        * @param {Function} onValid 验证结束后触发的方法
        */
        function vEmail(obj,onValid) {
            var opt=obj['opt'],cfg=obj['cfg'];
            if(!FD.widget.Valid.regExps.isEmail.test(this.value)) {
                onValid.call(this,'email',opt);
                return;
            }
            FD.common.request('JSONP',opt.remote,{
                scope: this,
                fn: 'email',
                onCallback: function (o) {
                    if(o.success) {
                        cfg.isValid=true;
                        onValid.call(this,'pass',opt);
                    } else
                        onValid.call(this,'rEmail',opt);
                },
                onTimeout: function () {
                    cfg.isValid=true;
                    onValid.call(this,'pass',opt);
                },
                onFailure: function () {
                    cfg.isValid=true;
                    onValid.call(this,'pass',opt);
                }
            },{
                checkValue: encodeURI(this.value)
            });
        }
        //password valid
        function vPwd(o) {
            if(o.key=='密码') {
                if(this.value=='') return '请填写密码。';
                else if(!/^[A-Za-z\d]{6,20}$/.test(this.value)) return '您设置的密码有误。密码由6-20个英文字母(区分大小写)或数字组成。';
                return true;
            } else {
                var tr=FYD.getAncestorByTagName(this,'tr'),
            preTr=FYD.getPreviousSibling(tr),
            prePD=FYS('input[type=password]',preTr,true);
                if(prePD.value=='') return '请先在上面文本框中输入密码。';
                if(prePD.value!=this.value) return '两次输入的密码不一致！请再输入一遍您上面填写的密码。';
                return true;
            }
        }
        //验证码刷新
        function changeImg(url) {
            url=url+'&t='+new Date().valueOf();
            FYG('checkcodeimg').src=url;
        }
        /*
        * auto resize image
        */
        function resizeImage(img,w,h) {
            //if(FDEV.env.ua.ie==6) return;
            img.removeAttribute("width");
            img.removeAttribute("height");
            var pic;
            if(window.ActiveXObject) {
                pic=new Image();
                pic.src=img.src;
            } else pic=img;
            if(pic&&pic.width&&pic.height&&w) {
                if(!h) h=w;
                if(pic.width>w||pic.height>h) {
                    var scale=pic.width/pic.height,fit=scale>=w/h;
                    if(window.ActiveXObject) img=img.style;
                    img[fit?'width':'height']=fit?w:h;
                    if(window.ActiveXObject) img[fit?'height':'width']=(fit?w:h)*(fit?1/scale:scale);
                }
            }
        }
        //表单验证
        var validGroup1={
            valid: function () {
                return false;
            }
        };
        //表单提交
        var onSubmit=function () {
            return false;
        };
        FYE.onDOMReady(function () {
            FDEV.namespace("FD.Trade.Order");
            var FTO=FD.Trade.Order,
        frmOrder=FYG('frmOrder'),
        address=FYG('address'),
        mode=FYG('mode'),
        bill=FYG('bill'),
        product=FYG('product'),
            //后台提供的JSON数据
        productData=FYG('productData'),
            //提交表单时需要提交的产品信息JSON
        productValue=FYG('productValue'),
            //页面操作中的产品数据
        pData=[],
        btnRegist=FYG('btnRegist'),
        fireEventHandler=function (el,e) {
            if(window.ActiveXObject) {
                el.fireEvent('on'+e);
            } else {
                var evt=document.createEvent('HTMLEvents');
                evt.initEvent(e,true,true);
                el.dispatchEvent(evt);
            };
        };
            onSubmit=function () {
                if(!validGroup1.valid()) return false;
                FYS('input[placeholder]','frmOrder').forEach(function (el) {
                    if(FYD.getAttribute(el,'placeholder')==el.value)
                        el.value='';
                });
                //将产品数据格式化为固定格式的JSON回传后台
                productValue.value=FDEV.lang.JSON.stringify(pData.map(function (el) {
                    return { offerId: el.offerId,amount: el.amount,fare: el.fare };
                }));
                alert(productValue.value);
                return false;
            };
            FTO={
                //初始化验证
                validInit: function () {
                    validGroup1=new FD.widget.Valid(FYS('[vg=1]'),{
                        onValid: function (res,o) {
                            var row;
                            if(o.key=='交易方式')
                                row=FYD.getAncestorByTagName(this,'li');
                            else if(o.key=='数量'||o.key=='运费')
                                row=FYD.getAncestorByTagName(this,'td');
                            else if(o.key=='验证码')
                                row=FYD.getAncestorByTagName(this,'table');
                            else
                                row=FYD.getAncestorByTagName(this,'tr');
                            n=FYS('span.n',row,true);
                            n.innerHTML='';
                            if(res=='pass') {
                                FYD.removeClass(row,'error');
                                FYD.addClass(row,'ok');
                            } else if(res=='default') {
                                FYD.removeClass(row,'error');
                                FYD.removeClass(row,'ok');
                            } else {
                                switch(res) {
                                    default:
                                        n.innerHTML='请填写正确的内容。';
                                        break;
                                    case 'required':
                                        n.innerHTML='请填写'+o.key+'。';
                                        break;
                                    case 'int':
                                        n.innerHTML='请填写正确的格式。';
                                        break;
                                    case 'min':
                                        if(o.key=='数量') n.innerHTML='最小起订量为'+o.min;
                                        else n.innerHTML=o.key+'必须大于2个字。';
                                        break;
                                    case 'max':
                                        n.innerHTML='最大可购数量为'+o.max;
                                        break;
                                    case 'fun':
                                        n.innerHTML=o.msg;
                                        break;
                                    case 'reg':
                                        if(o.key=='邮政编码')
                                            n.innerHTML='请填写正确的6位邮政编码。';
                                        break;
                                }
                                FYD.removeClass(row,'ok');
                                FYD.addClass(row,'error');
                            }
                        }
                    });
                },
                //地址区域
                addressInit: function () {
                    var lis=FYS('li',address),
                radios=FYS('input[type=radio]',address),
                radioChecked=radios.filter(function (el) { return !!el.checked; }),
                valids=FYS('[vg=1]',address),
                isPCAInit=false,
                pcaInit=function () {
                    var selects=FYS('select',address);
                    new FD.widget.PCA(selects,{
                        store: FD.widget.PCAStore,
                        vals: [
                            FYD.getAttribute(selects[0],'init'),
                            FYD.getAttribute(selects[1],'init'),
                            FYD.getAttribute(selects[2],'init')
                        ]
                    });
                    isPCAInit=true;
                };
                    FYE.on(radios,'click',function (e) {
                        FYD.removeClass(lis,'checked');
                        FYD.addClass(FYD.getAncestorByTagName(this,'li'),'checked');
                        if(radios.slice(-1)[0]==this) {
                            if(!FD.widget.PCAStore) {
                                FD.common.request('jsonp',['http://style.china.alibaba.com/js/lib/fdev-v3/widget/cascade/pca-min.js','http://style.china.alibaba.com/js/lib/fdev-v3/widget/cascade/pcaData1.js'],{
                                    onSuccess: pcaInit
                                });
                            } else if(!isPCAInit) pcaInit();
                            validGroup1.active(valids);
                        } else validGroup1.active(valids,false);

                    });
                    radioChecked.forEach(function (el) {
                        fireEventHandler(el,'click');
                    });

                },
                //交易方式选择区域
                modeInit: function () {
                    var lis=FYS('li',mode),
                radios=FYS('input[type=radio]',mode),
                radioChecked=radios.filter(function (el) { return !!el.checked; });
                    FYE.on(radios,'click',function (e) {
                        FYD.removeClass(lis,'checked');
                        FYD.addClass(FYD.getAncestorByTagName(this,'li'),'checked');
                    });
                    radioChecked.forEach(function (el) {
                        fireEventHandler(el,'click');
                    });
                },
                //发票区域
                billInit: function () {
                    var lis=FYS('li',bill),
                radios=FYS('input[type=radio]',bill),
                radioChecked=radios.filter(function (el) { return !!el.checked; }),
                valids=FYS('[vg=1]',bill),
                isPCAInit=false,
                pcaInit=function () {
                    var selects=FYS('select',bill);
                    new FD.widget.PCA(selects,{
                        store: FD.widget.PCAStore,
                        vals: [
                            FYD.getAttribute(selects[0],'init'),
                            FYD.getAttribute(selects[1],'init'),
                            FYD.getAttribute(selects[2],'init')
                        ]
                    });
                    isPCAInit=true;
                };
                    FYE.on(radios,'click',function (e) {
                        FYD.removeClass(lis,'checked');
                        FYD.addClass(FYD.getAncestorByTagName(this,'li'),'checked');
                        if(radios.slice(-1)[0]==this) {
                            if(!FD.widget.PCAStore) {
                                FD.common.request('jsonp',['http://style.china.alibaba.com/js/lib/fdev-v3/widget/cascade/pca-min.js','http://style.china.alibaba.com/js/lib/fdev-v3/widget/cascade/pcaData1.js'],{
                                    onSuccess: pcaInit
                                });
                            } else if(!isPCAInit) pcaInit();
                            validGroup1.active(valids);
                        } else validGroup1.active(valids,false);

                    });
                    radioChecked.forEach(function (el) {
                        fireEventHandler(el,'click');
                    });
                },
                //订单详情区域
                productInit: function () {
                    var trs=FYS('tbody>tr',product),
                total=FYG('total');
                    //pData=FDEV.lang.JSON.parse(productData.value),
                    pData=eval('('+productData.value+')');
                    //计算所有订单总价 TODO:待修改
                    function calcTotal() {
                        var t=0;
                        pData.forEach(function (o) {
                            t+=o.total;
                        });
                        total.innerHTML=t.toFixed(2);
                    }
                    //从后台提供的JSON数据中根据offerId获取offer数据
                    function getOfferDetail(offerId) {
                        for(var i=0,len=pData.length;i<len;i++) {
                            if(pData[i].offerId==offerId)
                                return pData[i];
                        }
                        return null;
                    }
                    //自动纠错
                    function vFare() {
                        if(this.value) {
                            if(/^\d*(\.\d*)?$/.test(this.value)) {
                                this._value=this.value;
                            } else
                                this.value=this._value||'';
                        } else this._value='';
                    }
                    function vNum() {
                        if(this.value) {
                            if(/^\d+$/.test(this.value)) {
                                this._value=this.value;
                                return 'pass';
                            } else {
                                this.value=this._value||'';
                                return 'fail';
                            }
                        } else this._value='';
                        return 'fail';
                    }
                    //给所有offer行初始化
                    trs.forEach(function (tr,i) {
                        //获取当前offer的id，根据id获取offer数据
                        var offerId=FYD.getAttribute(tr,'offerId'),
                    o=getOfferDetail(offerId);
                        //如果数据获取成功
                        if(o) {
                            var td4=FYS('td.c4',tr,true),
                        fare=FYS('input.txt',td4,true),
                        td6=FYS('td.c6',tr,true),
                        minus=FYS('a.minus',td6,true),
                        num=FYD.getNextSibling(minus),
                        plus=FYD.getNextSibling(num),
                        td7=FYD.getNextSibling(td6);
                            //初始化数据
                            num.value=o.amount;
                            //TODO:待修改
                            td7.innerHTML=o.total.toFixed(2);
                            //初始化事件
                            FYE.on(minus,'click',function (e) {
                                FYE.preventDefault(e);
                                if(/^\d+$/.test(num.value)&&num.value*1>o.min) {
                                    num.value=num.value*1-1;
                                    fireEventHandler(num,'blur');
                                }
                            });
                            FYE.on(plus,'click',function (e) {
                                FYE.preventDefault(e);
                                if(/^\d+$/.test(num.value)&&num.value*1<o.max) {
                                    num.value=num.value*1+1;
                                    fireEventHandler(num,'blur');
                                }
                            });
                            //                    FYE.on(num,'blur',function (e,o) {
                            //                        var config=validGroup1.getConfig(this);
                            //                        //只要当格式验证正确后才进行价格计算
                            //                        if(config&&config.isValid) {
                            //                            var amount=this.value*1;
                            //                            if(amount!=o.amount) {
                            //                                //TODO:待修改
                            //                                //o.amount=amount
                            //                                //td7.innerHTML=o.total;
                            //                                //重置总价
                            //                                //calcTotal();
                            //                            }
                            //                        }
                            //                    },o);
                            if(fare) {
                                FYE.on(fare,'keyup',vFare);
                                FYE.on(fare,'blur',function () {
                                    vFare.call(this);
                                    if(this.value)
                                        o.fare=this._value=this.value=(('0'+this.value)*1).toFixed(2);
                                    //ajax
                                });
                                fireEventHandler(fare,'blur');
                            }
                            if(num) {
                                FYE.on(num,'keyup',vNum);
                                FYE.on(num,'blur',function () {
                                    vNum.call(this);
                                    if(this.value)
                                        o.amount=this._value=this.value=this.value*1;
                                    //ajax
                                });
                                fireEventHandler(num,'blur');
                            }
                        }
                    });
                    //页面初始化时计算总价
                    calcTotal();
                    //运费说明详细浮层
                    (function () {
                        var triggers=FYS('td.c4 em',product),
                tipDetail=document.createElement('div'),
                curTrigger,
                tipP,
                timer;
                        tipDetail.id='tipDetail';
                        FYD.setStyle(tipDetail,'display','none');
                        FYD.addClass(tipDetail,'tips-c');
                        tipDetail.innerHTML='<span></span><div><p class="info"></p></div>';
                        document.body.appendChild(tipDetail);
                        tipP=FYS('p',tipDetail,true);
                        function clear() {
                            if(timer) {
                                clearTimeout(timer);
                                timer=null;
                            }
                        }
                        function hide() {
                            clear();
                            timer=setTimeout(function () {
                                FYD.setStyle(tipDetail,'display','none');
                                curTrigger=null;
                            },500);
                        }
                        FYE.on(triggers,'mouseover',function (e) {
                            clear();
                            if(curTrigger!=this) {
                                curTrigger=this;
                                var detail=FYS('>input',this,true),
                        rlink=FYD.getRegion(this);
                                tipP.innerHTML=detail.value;
                                FYD.setStyle(tipDetail,'left',rlink.left-10+'px');
                                FYD.setStyle(tipDetail,'top',rlink.top+22+'px');
                                FYD.setStyle(tipDetail,'display','');
                            }
                        });
                        FYE.on(triggers,'mouseout',hide);
                        FYE.on(tipDetail,'mouseenter',clear);
                        FYE.on(tipDetail,'mouseleave',hide);
                    })();
                },
                //默认提示文本
                placehodlerInit: function () {
                    if(!('placeholder' in document.createElement('input'))) {
                        var els=FYS('input[placeholder]');
                        els.forEach(function (el) {
                            var defValue=FYD.getAttribute(el,'placeholder'),
                        defColor=FYD.getStyle(el,'color');
                            FYE.on(el,'focus',function () {
                                if(this.value==''||this.value==defValue) {
                                    FYD.setStyle(this,'color',defColor);
                                    this.value='';
                                }
                            });
                            FYE.on(el,'blur',function () {
                                if(this.value==''||this.value==defValue) {
                                    FYD.setStyle(this,'color','#999');
                                    this.value=defValue;
                                }
                            });
                            fireEventHandler(el,'blur');
                        });
                    }
                },
                //注册一体化浮层
                registInit: function () {
                    var regist=FYG('regist'),
                aproxy=FYS('a.proxy',regist,true),
                service=FYG('service'),
                iframe=FYS('iframe',service,true),
                btnRegistSubmit=FYG('btnRegistSubmit'),
                closes=FYS('a.close',service),
                validGroup2=new FD.widget.Valid(FYS('[vg=2]'),{
                    onValid: function (res,o) {
                        var row;
                        if(o.key=='验证码')
                            row=FYD.getAncestorByTagName(this,'table');
                        else
                            row=FYD.getAncestorByTagName(this,'tr');
                        n=FYS('span.n',row,true);
                        n.innerHTML='';
                        if(res=='pass') {
                            FYD.removeClass(row,'error');
                            FYD.addClass(row,'ok');
                        } else if(res=='default') {
                            FYD.removeClass(row,'ok');
                            FYD.removeClass(row,'error');
                        } else {
                            switch(res) {
                                default:
                                    n.innerHTML='请填写正确的内容。';
                                    break;
                                case 'required':
                                    n.innerHTML='请填写'+o.key+'。';
                                    break;
                                case 'email':
                                    n.innerHTML='您输入的电子邮箱格式不正确，请重新填写。</br>如：abc@yahoo.cn';
                                    break;
                                case 'reg':
                                    if(o.key=='登录名')
                                        n.innerHTML='您的填写有误。会员登录名只能由4-20个英文字母或数字组成(不支持中文、不能以数字开头)。';
                                    break;
                                case 'fun':
                                    n.innerHTML=o.msg;
                                    break;
                                case 'rEmail':
                                    n.innerHTML='该邮箱地址已存在。';
                                    break;
                                case 'rUser':
                                    n.innerHTML='该用户名已存在。';
                                    break;

                            }
                            FYD.removeClass(row,'ok');
                            FYD.addClass(row,'error');
                        }
                    }
                });
                    FYE.on(btnRegist,'click',function () {
                        if(validGroup1.valid()) {
                            FD.widget.block(regist);
                        }
                    });
                    FYE.on(closes,'click',function (e) {
                        FYE.preventDefault(e);
                        FD.widget.unblock({ onUnblock: function () { FD.widget.block(regist); } });
                    });
                    FYE.on(aproxy,'click',function (e) {
                        FYE.preventDefault(e);
                        if(iframe.src=='about:blank')
                            iframe.src='http://page.china.alibaba.com/shtml/aliprotocol/aliservice.html';
                        FD.widget.block(service);
                    });
                    FYE.on(btnRegistSubmit,'click',function (e) {
                        FYE.preventDefault(e);
                        if(validGroup2.valid()) {
                            FD.widget.unblock();
                            onSubmit();
                        }
                    });
                },
                //阿里旺旺初始化
                alitalkInit: function () {
                    new FD.widget.Alitalk(FYS('a[alitalk]','contact'),{
                        onRemote: function () {
                            switch(this.opt.online) {
                                case 0:
                                case 2:
                                case 6:
                                default:
                                    this.innerHTML='旺旺留言';
                                    this.title='旺旺留言';
                                    break;
                                case 1:
                                    this.innerHTML='在线洽谈';
                                    this.title='在线洽谈';
                                    break;
                                case 4:
                                case 5:
                                    this.innerHTML='手机在线';
                                    this.title='手机在线';
                                    break;
                            }
                        }
                    });
                }
            };
            //IE和no-IE浏览器事件触发不同的问题修复。
            if(window.ActiveXObject) {
                FTO.placehodlerInit();
                if(product) FTO.productInit();
                FTO.validInit();
            } else {
                FTO.validInit();
                FTO.placehodlerInit();
                if(product) FTO.productInit();
            }
            if(address) FTO.addressInit();
            if(mode) FTO.modeInit();
            if(bill) FTO.billInit();
            if(btnRegist) FTO.registInit();
            FTO.alitalkInit();
        });
    </script>
</head>
<body>
    <div id="doc" class="w952">
        <form id="frmOrder" action="#" onsubmit="return onSubmit();" method="post">
            <fieldset id="address" class="option">
                <legend>
                    收货地址确认</legend>
                <ul>
                    <li>
                        <input type="radio" id="radio11" name="address" checked="checked" /><label for="radio11">上海 上海市 普陀区 黄浦区 安普路233号</label> </li>
                    <li>
                        <input type="radio" id="radio12" name="address" /><label for="radio12">使用其他地址</label>
                        <div class="ext">
                            <span class="notice"><em>*</em>为必填项</span>
                            <table cellpadding="0" cellspacing="0">
                                <tbody>
                                    <tr>
                                        <th><em>*</em>地址</th>
                                        <td class="c2">
                                            <select name="" valid="{type:'fun',fun:vPCA,cache:false,key:'省'}" vg="1">
                                            </select>省
                                            <select name="" valid="{type:'fun',fun:vPCA,cache:false,key:'市'}" vg="1">
                                            </select>市
                                            <select name="">
                                            </select>区</td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th><em>*</em>邮政编码</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" maxlength="6" value="" valid="{type:'reg',required:true,reg:/\d{6}/,key:'邮政编码'}" vg="1" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th><em>*</em>街道地址</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" value="" style="width: 410px;" valid="{required:true,min:2,key:'街道地址'}" vg="1" maxlength="64" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th><em>*</em>收货人姓名</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" value="" valid="{required:true,min:2,key:'收货人姓名'}" vg="1" maxlength="64" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th>电话</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" class="tel" placeholder="区号-电话号码-分机" autocomplete="off" maxlength="30" valid="{type:'fun',fun:vPhone,cache:false,key:'电话'}" value="" vg="1" />
                                            手机<input type="text" class="txt" maxlength="11" name="" value="" valid="{type:'fun',fun:vPhone,cache:false,key:'手机'}" vg="1" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span><span class="d">电话和手机至少要填写一项</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </li>
                </ul>
            </fieldset>
            <fieldset id="mode" class="option">
                <legend>
                    选择交易方式</legend>
                <ul>
                    <li>
                        <input type="radio" id="radio21" name="mode" valid="{type:'fun',fun:vMode,cache:false,key:'交易方式'}" vg="1" /><label for="radio21">使用支付宝担保交易<img alt="支付宝" src="http://img.china.alibaba.com/images/common/icon_v02/alipay2.gif" /><span>（使用支付宝担保交易，收到货品后才付款，让你购物更放心！）</span></label><span class="n"></span>
                        <div class="ext">
                            <p class="flow"><img alt="支付宝担保交易流程" src="http://img.china.alibaba.com/images/app/trade/order/flow1.png" width="588" height="69" /></p>
                        </div>
                    </li>
                    <li>
                        <input type="radio" id="radio22" name="mode" /><label for="radio22">预存款交易<img alt="预存款" src="http://img.china.alibaba.com/images/common/icon_v02/precharge2.gif" /><span>（您可充值到您在供应商的预存款帐户，专款购买其货品，简化您的购买流程！）</span></label>
                        <div class="ext">
                            <p>您还不是供应商<b>bravoolgo</b>的预存款买家，请在下单后及时向此供应商充值</p>
                            <p class="split"></p>
                            <p class="fd-gray">供应商支付预存款交易。您可充值到您在供应商的预存款帐户，以后可以在购买时直接通过预存款进行付款，简化您的购买流程，帮您免除贷款安全担忧。<a href="#">了解更多</a></p>
                            <p class="flow"><img alt="预存款交易流程" src="http://img.china.alibaba.com/images/app/trade/precharge/flow1.png" width="588" height="69" /></p>
                        </div>
                    </li>
                </ul>
            </fieldset>
            <fieldset id="bill" class="option">
                <legend>
                    发票信息确认</legend>
                <ul>
                    <li>
                        <input type="radio" id="radio31" name="bill" checked="checked" /><label for="radio31">不需要发票</label></li>
                    <li>
                        <input type="radio" id="radio32" name="bill" /><label for="radio32">需要发票</label>
                        <div class="ext">
                            <span class="notice"><em>*</em>为必填项</span>
                            <table cellpadding="0" cellspacing="0">
                                <caption>
                                    发票收取地址确认</caption>
                                <tbody>
                                    <tr>
                                        <th><em>*</em>地址</th>
                                        <td class="c2">
                                            <select name="" valid="{type:'fun',fun:vPCA,cache:false,key:'省'}" vg="1">
                                            </select>省
                                            <select name="" valid="{type:'fun',fun:vPCA,cache:false,key:'市'}" vg="1">
                                            </select>市
                                            <select name="">
                                            </select>区</td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th><em>*</em>邮政编码</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" maxlength="6" value="" valid="{type:'reg',required:true,reg:/\d{6}/,key:'邮政编码'}" vg="1" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th><em>*</em>街道地址</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" value="" style="width: 410px;" valid="{required:true,min:2,key:'街道地址'}" vg="1" maxlength="64" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th><em>*</em>收票人姓名</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" value="" valid="{required:true,min:2,key:'收票人姓名'}" vg="1" maxlength="64" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th>电话</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" class="tel" placeholder="区号-电话号码-分机" autocomplete="off" maxlength="30" valid="{type:'fun',fun:vPhone,cache:false,key:'电话'}" value="" vg="1" />
                                            手机<input type="text" class="txt" maxlength="11" name="" value="" valid="{type:'fun',fun:vPhone,cache:false,key:'手机'}" vg="1" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span><span class="d">电话和手机至少要填写一项</span></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table cellpadding="0" cellspacing="0">
                                <caption>
                                    购货单位信息确认</caption>
                                <tbody>
                                    <tr>
                                        <th><em>*</em>购货单位名称</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" maxlength="64" value="" style="width: 410px;" valid="{required:true,min:2,key:'购货单位名称'}" vg="1" /></td>
                                        <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                    </tr>
                                    <tr>
                                        <th>纳税人识别码</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" maxlength="64" value="" style="width: 410px;" maxlength="64" /></td>
                                        <td class="c3"></td>
                                    </tr>
                                    <tr>
                                        <th>开户行及帐号</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" maxlength="64" value="" style="width: 410px;" maxlength="64" /></td>
                                        <td class="c3"></td>
                                    </tr>
                                    <tr>
                                        <th>地址|电话</th>
                                        <td class="c2">
                                            <input type="text" class="txt" name="" maxlength="64" value="" style="width: 410px;" maxlength="64" /></td>
                                        <td class="c3"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </li>
                </ul>
            </fieldset>
            <fieldset id="detail">
                <legend>
                    订购信息确认</legend>
                <div id="contact">
                    卖家：<a class="fd-bold" href="#">安拉（个体经营）</a><a href="javascript:;" alitalk="{id:'swainet'}"></a></div>
                <div id="product">
                    <input id="productData" type="hidden" value="[{offerId:2,fare:19,price:28,min:1,max:100,amount:1,total:47}]" />
                    <input id="productValue" type="hidden" value="" />
                    <table cellpadding="0" cellspacing="0">
                        <thead>
                            <tr>
                                <th class="c1"></th>
                                <th class="c2">货品</th>
                                <th class="c3">总重量（公斤）</th>
                                <th class="c4">运费（元）</th>
                                <th class="c5">单价</th>
                                <th class="c6">数量</th>
                                <th class="c7">金额（元）</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!--从进货单过来的订单，无法修改数量和运费-->
                            <tr offerid="1">
                                <td class="c1"><img alt="" src="http://img.china.alibaba.com/img/offer/31/09/59/34/3/310959343.summ.jpg" onload="resizeImage(this,64)" width="64" height="64" /></td>
                                <td class="c2"><a href="#">abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz</a></td>
                                <td class="c3">--</td>
                                <td class="c4">
                                    <p>首重：5.00</p>
                                    <p>续重：14.00</p>
                                    <p class="fd-bold">总计：19.00</p>
                                    <p><em>查看详情<input type="hidden" value="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" /></em></p>
                                </td>
                                <td class="c5">28.00</td>
                                <td class="c6">
                                    <div class="fd-locate">
                                        <p><a class="minus-disabled" href="javascript:;"></a>
                                            <input type="text" class="txt" maxlength="9" value="3" disabled="disabled" /><a class="plus-disabled" href="javascript:;"></a></p>
                                        <p>（可售100条）</p>
                                    </div>
                                </td>
                                <td class="c7">103.00</td>
                            </tr>
                            <!--立即订购，可以修改数量和运费，计算交由后台执行-->
                            <tr offerid="2">
                                <td class="c1"><img alt="" src="http://img.china.alibaba.com/img/offer/31/09/59/34/3/310959343.summ.jpg" onload="resizeImage(this,64)" width="64" height="64" /></td>
                                <td class="c2"><a href="#">abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz</a></td>
                                <td class="c3">--</td>
                                <td class="c4">
                                    <div class="fd-locate">
                                        <p class="fd-bold">总计：<input type="text" class="txt" maxlength="12" value="" valid="{required:true,key:'运费'}" vg="1" /></p>
                                        <p><em>查看详情<input type="hidden" value="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb" /></em></p>
                                        <span class="n"></span>
                                    </div>
                                </td>
                                <td class="c5">28.00</td>
                                <td class="c6">
                                    <div class="fd-locate">
                                        <p><a class="minus" href="javascript:;"></a>
                                            <input type="text" class="txt" maxlength="9" value="" valid="{type:'int',required:true,min:1,max:200,key:'数量'}" vg="1" /><a class="plus" href="javascript:;"></a></p>
                                        <p>（可售200条）</p>
                                        <span class="n"></span>
                                    </div>
                                </td>
                                <td class="c7"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="memo" class="fd-clr">
                    <div class="fd-left">
                        给卖家留言：<textarea cols="" rows="" class="txt"></textarea></div>
                    <div class="fd-right">
                        实付款（含运费）：<em id="total"></em>元
                    </div>
                </div>
            </fieldset>
            <fieldset id="auth" class="authcode">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr>
                            <th><em>*</em>请输入验证码</th>
                            <td>
                                <input type="text" class="txt" maxlength="4" valid="{required:true,key:'验证码'}" vg="1" name="" />
                            </td>
                            <td><img id="checkcodeimg" src="http://ccv2.china.alibaba.com/service/checkcode?sessionID=lR%2BQxFXS2%24DIXcP%24L6bStsvp%2Ba9hGc0V" alt="" /></td>
                            <td><a onclick="changeImg('http://ccv2.china.alibaba.com/service/checkcode?sessionID=lR%2BQxFXS2%24DIXcP%24L6bStsvp%2Ba9hGc0V&amp;sendTime=Fri+Sep+10+13%3A59%3A41+CST+2010')" href="#feedBack">看不清，换一张</a></td>
                        </tr>
                        <tr class="r2">
                            <th>&nbsp;</th>
                            <td colspan="3"><span class="n"></span></td>
                        </tr>
                    </tbody>
                </table>
            </fieldset>
            <div class="fd-clr">
                <!--立即订购按钮-->
                <a id="btnSubmit" class="btn-a" href="javascript:;"><span class="btn-l">
                <button type="submit">
                    <em>确认无误，订购！</em>
                </button>
                </span><span class="btn-r"></span></a>
                <!--注册一体化按钮-->
                <a id="btnRegist" class="btn-a" href="javascript:;"><span class="btn-l">
                <button type="button">
                    <em>我是新用户，我要订购！</em>
                </button>
                </span><span class="btn-r"></span></a>
            </div>
            <div id="regist" class="modal" style="display: none;">
                <div class="title fd-clr">
                    <h3>
                        <em>新会员注册</em></h3>
                    <span onclick="FD.widget.unblock();" class="close"></span>
                </div>
                <div class="box">
                    <fieldset>
                        <div class="tip">
                            <em>*</em>为必填项</div>
                        <table class="form" cellpadding="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <th><em>*</em>电子邮箱</th>
                                    <td class="c2">
                                        <input type="text" class="txt" maxlength="200" valid="{type:'remote',remote:'http://trade.china.alibaba.com/order/ajax_check_member.do?check_type=email',fun:vEmail,required:true,key:'电子邮箱'}" vg="2" /><br />
                                        <input id="cbx1" type="checkbox" checked="checked" /><label for="cbx1">用该邮箱注册支付宝账户并绑定</label></td>
                                    <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                </tr>
                                <tr>
                                    <th><em>*</em>会员登录名</th>
                                    <td class="c2">
                                        <input type="text" class="txt" maxlength="64" valid="{required:true,type:'remote',remote:'http://trade.china.alibaba.com/order/ajax_check_member.do?check_type=memberid',fun:vUser,key:'登录名'}" vg="2" /></td>
                                    <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                </tr>
                                <tr>
                                    <th><em>*</em>密码</th>
                                    <td class="c2">
                                        <input type="password" class="txt" maxlength="20" valid="{required:true,type:'fun',fun:vPwd,key:'密码'}" vg="2" /></td>
                                    <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                </tr>
                                <tr>
                                    <th><em>*</em>重复输密码</th>
                                    <td class="c2">
                                        <input type="password" class="txt" maxlength="20" valid="{type:'fun',fun:vPwd,cache:false,key:'重复密码'}" vg="2" /></td>
                                    <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td class="c2">
                                        <input id="cbx2" type="checkbox" checked="checked" valid="{evt:'click',required:true,key:'协议'}" vg="2" /><label for="cbx2">同意阿里巴巴服务条款<a class="proxy" href="javascript:;">查看服务条款</a></label></td>
                                    <td class="c3"><span class="y">&nbsp;</span><span class="n"></span></td>
                                </tr>
                                <tr class="authcode">
                                    <th><em>*</em>验证码</th>
                                    <td colspan="2">
                                        <div class="authcode">
                                            <table cellspacing="0" cellpadding="0">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <input type="text" class="txt" maxlength="4" valid="{required:true,key:'验证码'}" vg="2" name="" />
                                                        </td>
                                                        <td><img src="http://ccv2.china.alibaba.com/service/checkcode?sessionID=lR%2BQxFXS2%24DIXcP%24L6bStsvp%2Ba9hGc0V" alt="" /></td>
                                                        <td><a onclick="changeImg('http://ccv2.china.alibaba.com/service/checkcode?sessionID=lR%2BQxFXS2%24DIXcP%24L6bStsvp%2Ba9hGc0V&amp;sendTime=Fri+Sep+10+13%3A59%3A41+CST+2010')" href="#feedBack">看不清，换一张</a></td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="3"><span class="n"></span>&nbsp;</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td class="c2"><a id="btnRegistSubmit" class="btn-a4" href="javascript:;"><span class="btn-l">
                                    <button type="button">
                                        <em>提交注册信息</em></button></span><span class="btn-r"></span></a></td>
                                    <td class="c3"></td>
                                </tr>
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>
        </form>
        <div id="service" class="modal" style="display: none;">
            <div class="title fd-clr">
                <h3>
                    <em>Alibaba服务条款</em></h3>
            </div>
            <div class="box">
                <h4>
                    请仔细阅读本协议</h4>
                <p>阿里巴巴公司根据以下条件和条款提供您所享有的服务</p>
                <p>
                    <iframe width="540" height="257" frameborder="0" scrolling="no" src="about:blank">
                    </iframe>
                </p>
                <p><a class="btn-a2 close" href="javascript:;"><span class="btn-l"><em>阅读完毕，关闭窗口</em></span><span class="btn-r"></span></a></p>
            </div>
        </div>
    </div>
</body>
</html>
